/*! For license information please see main.71d1047e.chunk.js.LICENSE.txt */
(this.webpackJsonpscambi=this.webpackJsonpscambi||[]).push([[0],{53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(4),s=a.n(c),r=a(32),i=a.n(r),l=a(17),o=a.n(l),j=a(19),b=a(12),u=a(13),d=a(9),m=a(28);a(46);m.a.initializeApp({apiKey:"AIzaSyD20nV3v_M0jfuO8RCtedTDneUva-USbP0",authDomain:"scambi-gasquemais.firebaseapp.com",projectId:"scambi-gasquemais",storageBucket:"scambi-gasquemais.appspot.com",messagingSenderId:"893102789014",appId:"1:893102789014:web:b0502d0b53837114070db7",measurementId:"G-01ZKV4EB0R"});var h=m.a;var x=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light",children:Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(u.b,{to:"/",className:"navbar-brand fs-4",children:"Scambi"}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(n.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(n.jsx)("li",{className:"nav-item",children:e.auth?Object(n.jsx)(u.b,{to:"/",className:"nav-link active",children:"Home"}):Object(n.jsx)("small",{className:"nav-link",children:"gasquemais"})}),Object(n.jsx)("li",{className:"nav-item",children:e.auth?Object(n.jsx)(u.b,{to:"/new",className:"nav-link",children:"Nuovo"}):Object(n.jsx)("p",{})}),Object(n.jsx)("li",{className:"nav-item",children:e.auth?Object(n.jsx)(u.b,{to:"/",className:"nav-link",onClick:function(){return e.setAuth(!1)},children:"Logout"}):Object(n.jsx)("p",{})})]})})]})})})};var O=function(e){var t=Object(c.useState)(""),a=Object(b.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)("btn btn-outline-dark"),l=Object(b.a)(i,2),o=l[0],j=l[1];return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{children:"Login"}),Object(n.jsx)("br",{}),Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(n.jsx)("input",{type:"password",className:"form-control pass-input",onChange:function(e){return r(e.target.value)}})]}),Object(n.jsx)("button",{className:o,onClick:function(t){t.preventDefault(),"rivoli"===s?(j("btn btn-primary"),e.setAuth(!0)):(j("btn btn-danger"),e.setAuth(!1))},children:"Login"})]})]})};var p=function(e){var t,a,c,s=h.firestore().collection("annunci"),r=Object(d.f)(),i=Object(d.g)().id;if(e.annunci.filter((function(e){e.titolo===i&&(t=e)})),void 0===t||!1===e.auth)return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{style:{fontSize:"400px"},children:"404"}),Object(n.jsxs)("small",{className:"text-muted",children:["Pagina non trovata. Vai alla ",Object(n.jsx)(u.b,{to:"/",children:"homepage"}),"."]})]});a="https://api.whatsapp.com/send?phone=".concat(t.numero);var l="Cerco"===t.categoria?"badge bg-primary":"badge bg-danger";c="mailto:".concat(t.email);var b=function(){var a=Object(j.a)(o.a.mark((function a(){var n,c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Sei sicuro di voler eliminare l'annuncio?")||!0!==e.auth){a.next=8;break}return a.next=3,s.where("titolo","==",t.titolo).get();case 3:return n=a.sent,c=n.docs[0].id,a.next=7,s.doc(c).delete();case 7:r.push("/");case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{children:t.titolo}),Object(n.jsxs)("small",{className:"text-muted",children:[t.nome,", ",t.data]}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{className:"text-muted",children:Object(n.jsx)("span",{className:l,children:t.categoria})}),Object(n.jsx)("br",{}),Object(n.jsx)("hr",{}),Object(n.jsx)("p",{children:t.testo}),Object(n.jsx)("br",{}),function(){for(var e=[],a=0;a<t.foto.length;a++)e.push(Object(n.jsx)("img",{src:t.foto[a],alt:"Website couldn't upload the photo"},a));return e}(),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{className:"btn btn-outline-light ms-2",onClick:function(){return window.open(a,"_blank")},children:"Manda un messaggio"}),Object(n.jsx)("button",{className:"btn btn-outline-light ms-2",onClick:function(){return window.open(c)},children:"Contatta via mail"}),Object(n.jsx)("button",{className:"btn btn-outline-light ms-2",onClick:b,children:"Elimina l'annuncio"}),Object(n.jsx)("div",{className:"delete-button",onClick:b}),Object(n.jsx)("hr",{})]})};var g=function(e){Object(c.useEffect)((function(){e.getAnnunci()}),[]),e.annunci.sort((function(e,t){var a=e.data.split("/"),n=t.data.split("/"),c=new Date(a[2],a[1],a[0]);return new Date(n[2],n[1],n[0]).getTime()-c.getTime()}));var t=e.annunci.map((function(e,t){var a=e,c=t,s="/"+a.titolo,r="Cerco"===a.categoria?"badge bg-primary":"badge bg-danger";return Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{className:"titolo",scope:"row",children:Object(n.jsx)(u.b,{to:s,className:"titolo",scope:"row",children:a.titolo})}),Object(n.jsx)("td",{children:Object(n.jsx)("span",{className:r,children:a.categoria})}),Object(n.jsx)("td",{children:a.nome}),Object(n.jsx)("td",{children:a.data})]},c)}));return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("h1",{className:"position-relative",children:["Annunci",Object(n.jsx)(u.b,{to:"/new",children:Object(n.jsx)("button",{className:"btn btn-outline-dark destra",children:"Nuovo"})})]}),Object(n.jsx)("small",{className:"text-muted",children:"Ecco gli annunci attualmente attivi."}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),0!==e.annunci.length?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"TITOLO"}),Object(n.jsx)("th",{scope:"col",children:"CATEGORIA"}),Object(n.jsx)("th",{scope:"col",children:"NOME"}),Object(n.jsx)("th",{scope:"col",children:"DATA"})]})}),Object(n.jsx)("tbody",{children:t})]})}):Object(n.jsxs)("div",{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h3",{children:"Tutto tace."}),Object(n.jsx)("small",{className:"text-muted",children:"Aggingi un annuncio per iniziare"})]})]})},f=a(34),v=a.n(f);var N=function(e){var t,a=h.firestore().collection("annunci"),s=Object(d.f)(),r=Object(c.useState)("\u2022 Richiedo qualcosa"),i=Object(b.a)(r,2),l=i[0],m=i[1],x=Object(c.useState)(""),O=Object(b.a)(x,2),p=O[0],g=O[1],f=Object(c.useState)(""),N=Object(b.a)(f,2),w=N[0],S=N[1],C=Object(c.useState)(""),k=Object(b.a)(C,2),y=k[0],T=k[1],A=Object(c.useState)(""),I=Object(b.a)(A,2),D=I[0],q=I[1],E=Object(c.useState)(""),F=Object(b.a)(E,2),L=F[0],P=F[1],R=Object(c.useState)([]),z=Object(b.a)(R,2),U=z[0],_=z[1],M=Object(c.useState)(!1),V=Object(b.a)(M,2),B=V[0],H=V[1],G=new Date,J=String(G.getDate()).padStart(2,"0")+"/"+String(G.getMonth()+1).padStart(2,"0")+"/"+G.getFullYear();if(!1===e.auth)return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{style:{fontSize:"400px"},children:"404"}),Object(n.jsxs)("small",{className:"text-muted",children:["Pagina non trovata. Vai alla ",Object(n.jsx)(u.b,{to:"/",children:"homepage"}),"."]})]});var K=function(){var e=Object(j.a)(o.a.mark((function e(t){var a,n,c,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H(!0),a=h.storage().ref(),n=[],c=0;case 4:if(c===t.target.files.length){e.next=19;break}return e.next=7,t.target.files[c];case 7:return s=e.sent,r=a.child(s.name),e.next=11,r.put(s);case 11:return e.t0=n,e.next=14,r.getDownloadURL();case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:c++,e.next=4;break;case 19:_(n),H(!1);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(j.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t="\u2022 Richiedo qualcosa"===l?"Cerco":"Offro","scambi.surge.sh/",v.a.send("service_phxn0gj","template_shxlnrm",{titolo:p,testo:L,link:"scambi.surge.sh/",to:"gasquemais@googlegroups.com"},"user_STmZslqigOUQfVm5dxubE"),e.next=6,a.add({categoria:t,data:J,nome:w,numero:y,testo:L,titolo:p,foto:U});case 6:return m("\u2022 Richiedo qualcosa"),g(""),q(""),T(""),P(""),S(""),e.next=14,s.push("/");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{children:"Crea un nuovo annuncio"}),Object(n.jsx)("h6",{className:"lead",children:"Completa il segnunte form per aggiungere un nuovo annuncio."}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"jumbotron",children:Object(n.jsxs)("form",{action:"inviato.php",method:"POST",encType:"multipart/form-data",children:[Object(n.jsx)("div",{className:"form-group",children:Object(n.jsxs)("select",{value:l,onChange:function(e){return m(e.target.value)},multiple:"",className:"form-control pass-input",id:"exampleSelect2",name:"categoria",row:"2",children:[Object(n.jsx)("option",{children:"\u2022  Richiedo qualcosa"}),Object(n.jsx)("option",{children:"\u2022  Offro qualcosa"})]})}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{value:p,onChange:function(e){return g(e.target.value)},type:"text",className:"form-control pass-input",placeholder:"Titolo annuncio",name:"titolo"})}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{value:w,onChange:function(e){return S(e.target.value)},type:"text",className:"form-control pass-input",placeholder:"Nome e cognome",name:"nome"})}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{value:y,onChange:function(e){return T(e.target.value)},type:"number",className:"form-control pass-input",placeholder:"Numero di telefono",name:"telefono"})}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("input",{value:D,onChange:function(e){return q(e.target.value)},type:"email",className:"form-control pass-input",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Indirizzo email",name:"email"})}),Object(n.jsx)("br",{}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsx)("textarea",{value:L,onChange:function(e){return P(e.target.value)},className:"form-control pass-input",id:"exampleTextarea",rows:"4",placeholder:"Testo dell'annuncio",name:"testo"})}),Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"exampleInputFile",children:"Carica una foto: "}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"file",onChange:K,className:"form-control fileToUpload pass-input mt-2",id:"fileToUpload","aria-describedby":"fileHelp",name:"fileToUpload",multiple:!0}),Object(n.jsx)("br",{}),B?Object(n.jsx)("div",{className:"spinner-border m-1",children:Object(n.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(n.jsx)("br",{})]}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{type:"submit",className:"btn btn-outline-dark",value:"Invia",onClick:Z,children:"Invia"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]})})]})};a(53);var w=function(){var e=h.firestore().collection("annunci"),t=Object(c.useState)(!1),a=Object(b.a)(t,2),s=a[0],r=a[1],i=Object(c.useState)([]),l=Object(b.a)(i,2),m=l[0],f=l[1],v=function(){var t=Object(j.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.get().then((function(e){var t=e.docs.map((function(e){return e.data()}));f(t.reverse())}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(x,{auth:s,setAuth:r}),Object(n.jsxs)(d.c,{children:[Object(n.jsx)(d.a,{exact:!0,path:"/",children:s?Object(n.jsx)(g,{getAnnunci:v,annunci:m}):Object(n.jsx)(O,{setAuth:r})}),Object(n.jsx)(d.a,{exact:!0,path:"/new",children:Object(n.jsx)(N,{auth:s})}),Object(n.jsx)(d.a,{path:"/:id",children:Object(n.jsx)(p,{annunci:m,auth:s})})]}),Object(n.jsxs)("small",{className:"fixed-bottom text-muted",style:{marginLeft:"10px"},children:[Object(n.jsx)("a",{href:"https://scarica-scambi.surge.sh/",target:"_blanck",children:"Scarica l'app"})," \u2022 created by ",Object(n.jsx)("a",{href:"https://github.com/lucagamerro/Scambi2",target:"_blank",rel:"noreferrer",children:"@lucagamerro"})]})]})})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,55)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(w,{})}),document.getElementById("root")),S()}},[[54,1,2]]]);
//# sourceMappingURL=main.71d1047e.chunk.js.map